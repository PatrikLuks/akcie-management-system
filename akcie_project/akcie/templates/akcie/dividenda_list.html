{% extends 'akcie/base.html' %}
{% block content %}
<h1>Seznam dividend</h1>

<form method="get" action="">
    <input type="text" name="q" placeholder="Hledat...">
    <button type="submit">Hledat</button>
</form>

<ul>
    {% for dividenda in dividendy %}
        <li><a href="/dividendy/{{ dividenda.id }}/">Dividenda - {{ dividenda.akcie.nazev }} ({{ dividenda.castka }} Kč, {{ dividenda.datum }})</a></li>
    {% endfor %}
</ul>
<a href="/dividendy/create/">Přidat novou dividendu</a>
<a href="/dividendy/export/">Exportovat dividendy do CSV</a>

<hr>
<h2>Vývoj příjmů z dividend</h2>
<canvas id="dividendChart" height="80"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const dividendLabels = [
    {% for d in dividendy %}'{{ d.datum }}',{% endfor %}
];
const dividendValues = [
    {% for d in dividendy %}{{ d.castka }},{% endfor %}
];
const ctx = document.getElementById('dividendChart').getContext('2d');
new Chart(ctx, {
    type: 'bar',
    data: {
        labels: dividendLabels,
        datasets: [{
            label: 'Příjmy z dividend (Kč)',
            data: dividendValues,
            backgroundColor: 'rgba(75, 192, 192, 0.6)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
        plugins: { legend: { display: false } }
    }
});
</script>
{% endblock %}
