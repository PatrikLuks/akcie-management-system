{# Tento partial načte aktuální cenu akcie přes yfinance a zobrazí ji v CZK #}
{% load static %}
<span id="aktualni-cena-{{ ticker }}">Načítání...</span>
<script>
(function() {
    const ticker = '{{ ticker }}';
    fetch(`/akcie/search/?q=${ticker}`)
        .then(response => response.json())
        .then(data => {
            if (data && data.length > 0) {
                const cena = data[0].cena;
                const mena = data[0].mena || data[0].currency || 'CZK';
                document.getElementById('aktualni-cena-{{ ticker }}').innerText = `${cena} ${mena}`;
            } else {
                document.getElementById('aktualni-cena-{{ ticker }}').innerText = 'N/A';
            }
        })
        .catch(() => {
            document.getElementById('aktualni-cena-{{ ticker }}').innerText = 'N/A';
        });
})();
</script>
