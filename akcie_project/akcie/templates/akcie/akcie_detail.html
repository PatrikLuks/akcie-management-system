{% extends 'akcie/base.html' %}
{% block content %}
<h1>Detail akcie: {{ akcie.nazev }}</h1>

<div class="card">
    <h2>Počet kusů</h2>
    <p>{{ akcie.pocet_ks }}</p>
</div>
<div class="card">
    <h2>Celková hodnota</h2>
    <p>{{ akcie.hodnota }} Kč</p>
</div>
<div class="card">
    <h2>Celková částka dividend</h2>
    <p>{{ total_dividendy }} Kč</p>
</div>

<h2>Transakce</h2>
<ul>
    {% for transakce in transakce %}
    <li>{{ transakce.typ }}: {{ transakce.mnozstvi }} kusů za {{ transakce.cena }} Kč ({{ transakce.datum }})</li>
    {% endfor %}
</ul>

<h2>Dividendy</h2>
<ul>
    {% for dividenda in dividendy %}
    <li>{{ dividenda.castka }} Kč ({{ dividenda.datum }})</li>
    {% endfor %}
</ul>

<canvas id="akcieChart" width="400" height="200"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const ctx = document.getElementById('akcieChart').getContext('2d');
        const data = {
            labels: [{% for dividenda in dividendy %}'{{ dividenda.datum }}',{% endfor %}],
            datasets: [{
                label: 'Dividendy',
                data: [{% for dividenda in dividendy %}{{ dividenda.castka }},{% endfor %}],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        };

        new Chart(ctx, {
            type: 'line',
            data: data,
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    });
</script>

<a href="/akcie/{{ akcie.id }}/update/">Upravit</a>
<a href="/akcie/{{ akcie.id }}/delete/">Smazat</a>
{% endblock %}
